(function(b){jQuery.shake=function(c){var a=jQuery.extend({},jQuery.shake.defaults,c);if(a.debug!==""){c=b(a.debug);c.append('x: <span id="x">0</span><br>');c.append('y: <span id="y">0</span><br>');c.append('z: <span id="z">0</span><br><br>');c.append('shake: <span id="shake">0</span><br>');c.append('shakeaccum: <span id="shakeaccum"></span><br>');c.append('debug: <span id="console"></span><br>')}var e=0,f=0,g=0,i=0,j=0,k=0,n=0,l=0,m=new Date,o=new Date,h=false;if(window.DeviceMotionEvent===undefined)a.supported!==
""&&b(a.supported).html("Your browser does not support Device Orientation and Motion API. Try it on an iPhone, iPod or iPad with iOS 4.2+.");else window.ondevicemotion=function(d){d=d.accelerationIncludingGravity;e=d.x;g=f=d.y;i=e-(e*a.hf+i*(1-a.hf));j=f-(f*a.hf+j*(1-a.hf));k=g-(g*a.hf+k*(1-a.hf));if(Math.abs(e-2*i)>a.violence*1.5||Math.abs(f-2*j)>a.violence*2||Math.abs(g-2*k)>a.violence*3&&h===false)l+=1;m=new Date;d=m.getTime()-o.getTime();b("#console").html(d);if(h){h=d>=a.debounce?false:true;
l=0}if(l>=a.shakethreshold&&h===false){n+=1;b("#shake").html(n);o=m;h=true;a.callback.call()}};a.debug!==""&&setInterval(function(){b("#x").html(Math.abs(e-2*i).toFixed(1));b("#y").html(Math.abs(f-2*j).toFixed(1));b("#z").html(Math.abs(g-2*k).toFixed(1));b("#shakeaccum").html(l)},10)}})(jQuery);jQuery.shake.defaults={debug:"",supported:"",violence:3,hf:0.2,shakethreshold:5,debounce:1E3,callback:function(){}};
